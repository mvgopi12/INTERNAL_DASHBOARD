{
  "unpublishedCollection": {
    "name": "query_js",
    "pageId": "CUSTOMER_CARE",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tmyVar1: [],\n\tmyVar2: {},\n\tgetTodayData: () => {\n\t\tlet returnData=[];\n\t\tfor (let i= (SELECT_LEADS.data.length-1); i>=0;i--)\n\t\t{\n\t\t\t\tif(SELECT_LEADS.data[i].STATUS!=\"COMPLETE\" && SELECT_LEADS.data[i].REMARK!=\"INSTALL REQUEST\"&& SELECT_LEADS.data[i].SCHEDULE_DATE==\"\" && SELECT_LEADS.data[i].ACTIVE==true)\n\t\t\t\t{\n\t\t\t\t\treturnData.push(SELECT_LEADS.data[i])\n\t\t\t\t}\n\t\t}\n\t\treturn returnData\n\t},\n\tget_schedule_data:()=>{\n\tlet data=[];\n\tfor (let i=0; i<SELECT_LEADS.data.length; i++)\n\t{\t\n\t\tif(helper_js.to_date(SELECT_LEADS.data[i].SCHEDULE_DATE)<=helper_js.get_today())\n\t\t{\n\t\t\tif(SELECT_LEADS.data[i].REMARK==\"CALL BACK\"|| SELECT_LEADS.data[i].REMARK==\"INTERESTED\")\n\t\t\t{\n\t\t\t\tdata.push(SELECT_LEADS.data[i]);\n\t\t\t}\n\t\t}\n\t}\n\t\tdata.sort((a,b)=>{\n\t\t\treturn (helper_js.to_date(b.SCHEDULE_DATE)-helper_js.to_date(a.SCHEDULE_DATE))\n\t\t})\n\treturn data;\n},\n\tget_request_data:()=>{\n\tlet data=[];\n\tfor (let i=0; i<SELECT_LEADS.data.length; i++)\n\t{\t\n\t\tif(helper_js.to_date(SELECT_LEADS.data[i].SCHEDULE_DATE)<=helper_js.get_today())\n\t\t{\n\t\t\tif(SELECT_LEADS.data[i].REMARK==\"DEMO REQUEST\"|| (SELECT_LEADS.data[i].REMARK==\"INSTALL REQUEST\"&& SELECT_LEADS.data[i].STATUS==\"INCOMPLETE\"))\n\t\t\t{\n\t\t\t\tdata.push(SELECT_LEADS.data[i]);\n\t\t\t}\n\t\t}\n\t}\n\tdata.sort((a,b)=>{\n\t\t\treturn (helper_js.to_date(b.SCHEDULE_DATE)-helper_js.to_date(a.SCHEDULE_DATE))\n\t\t})\n\treturn data;\n\t},\n\tnext:()=>{\n/*\n\t\tstoreValue(\"current_lead_card\",0) \n\t\tstoreValue(\"current_demo_card\",0) \n\t\tstoreValue(\"current_call_back_card\",0) \n\t\treturn\n*/\n\t\tswitch(appsmith.store.table_num)\n\t\t\t{\n\t\t\t\tcase 0:\n\t\t\t\t\tif(appsmith.store.current_lead_card>=appsmith.store.table.length-1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tSELECT_LEADS.run();\n\t\t\t\t\t\t\tstoreValue(\"current_lead_card\",0)\n\t\t\t\t\t\t\tshowAlert(\"Fresh leads have been updated\",\"success\")\n\t\t\t\t\t\t\treturn appsmith.store.current_lead_card\n\t\t\t\t\t\t}\n\t\t\t\t\tstoreValue(\"current_lead_card\",appsmith.store.current_lead_card+1)\n\t\t\t\t\treturn appsmith.store.current_lead_card\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\t\tif(appsmith.store.current_demo_card>=appsmith.store.table.length-1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tSELECT_LEADS.run();\n\t\t\t\t\t\t\tstoreValue(\"current_demo_card\",0)\n\t\t\t\t\t\t\tshowAlert(\"Confirmed leads have been updated\",\"success\")\n\t\t\t\t\t\t\treturn appsmith.store.current_demo_card\n\t\t\t\t\t\t}\n\t\t\t\t\tstoreValue(\"current_demo_card\",appsmith.store.current_demo_card+1)\n\t\t\t\t\treturn appsmith.store.current_demo_card\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tif(appsmith.store.current_call_back_card>=appsmith.store.table.length-1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tSELECT_LEADS.run();\n\t\t\t\t\t\t\tstoreValue(\"current_call_back_card\",0)\n\t\t\t\t\t\t\tshowAlert(\"Followups have been updated\",\"success\")\n\t\t\t\t\t\t\treturn appsmith.store.current_call_back_card\n\t\t\t\t\t\t}\n\t\t\t\t\tstoreValue(\"current_call_back_card\",appsmith.store.current_call_back_card+1)\n\t\t\t\t\treturn appsmith.store.current_call_back_card\n\t\t\t\t\tbreak\n\t\t\t\tcase 3:\n\t\t\t\t\tshowAlert(\"Data updated\",\"success\");\n\t\t\t\tdefault:\n\t\t\t\t\treturn Error()\n\t\t\t}\n\t\n\t},\n\tcopy:()=>{\n\t\tlet data=\"DATE: \"+appsmith.store.selectedTableRow.SCHEDULE_DATE+\"\\nCALLER: \"+appsmith.store.selectedTableRow.CALLER+\"\\nNAME: \"+appsmith.store.selectedTableRow.NAME+\"\\nPHONE: \"+appsmith.store.selectedTableRow.PHONE_NUMBER+\"\\nADDRESS: \"+appsmith.store.selectedTableRow.ADDRESS+\"\\nALTERNATE NUMBER: \"+appsmith.store.selectedTableRow.ALTERNATE_NUMBER+\"\\nLOCATION:\"+appsmith.store.selectedTableRow.LOCATION\n\t\tshowAlert(\"copied\",\"success\")\n\t\treturn data\n\t},\n\treturn_current_card:()=>\n\t{\n\t\tif(appsmith.store.table_num==0)\n\t\t\t{\n\t\t\t\treturn appsmith.store.table[appsmith.store.current_lead_card]\n\t\t\t}\n\t\telse if(appsmith.store.table_num==1)\n\t\t\t{\n\t\t\t\treturn appsmith.store.table[appsmith.store.current_demo_card]\n\t\t\t}\n\t\telse if(appsmith.store.table_num==2)\n\t\t\t{\n\t\t\t\treturn appsmith.store.table[appsmith.store.current_call_back_card]\n\t\t\t}\n\t\treturn appsmith.store.table[0]\n\t},\n\tsearch_customer:()=>{\n\t\tlet data=[]\n\t\tfor (let i=0; i<SELECT_LEADS.data.length; i++)\n\t\t{\t\n\t\t\tif(SELECT_LEADS.data[i].PHONE_NUMBER==customer_phone.text)\n\t\t\t{\n\t\t\t\tdata.push(SELECT_LEADS.data[i]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn data\n\t},\n\tget_install_n_leads_count:()=>\n\t{\n\t\tlet data=0;\n\t\t\n\t\tfor (let i=0; i<SELECT_LEADS.data.length; i++)\n\t\t{\t\n\t\t\tif(SELECT_LEADS.data[i].REMARK==\"INSTALL REQUEST\"&& SELECT_LEADS.data[i].STATUS==\"COMPLETE\")\n\t\t\t{\n\t\t\t\tdata++;\n\t\t\t}\n\t\t}\n\t\treturn [data,SELECT_LEADS.data.length-data]\n\t},\n\tupdate_data:()=>{\n\t\tif(progress.text == \"NONE\")\n\t\t\t{\n\t\t\tUPDATE_LEADS.run();\n\t\t\tINSERT_LOGS.run();\n\t\t\treturn\t\t\t\t\n\t\t\t}\n\t\telse if(progress.text == \"INSTALL REQUEST\"){\n\t\t\tUPDATE_LEADS.run();\n\t\t\tINSERT_LOGS.run();\n\t\t\treturn\n\t\t}\n\t\telse if(progress.text ==\"DEMO REQUEST\"){\n\t\t\tif(log_remark.selectedOptionLabel == \"INSTALL REQUEST\"){\n\t\t\t\tUPDATE_LEADS.run();\n\t\t\t\tINSERT_LOGS.run();\n\t\t\t\treturn\n\t\t\t}\n\t\t\telse if(progress.text == \"INTERESTED\"||progress.text == \"CALL BACK\"){\n\t\t\t\tif((log_remark.selectedOptionLabel != \"RNR\")||(log_remark.selectedOptionLabel != \"WRONG NUM\"))\n\t\t\t\t{\n\t\t\t\t\tINSERT_LOGS.run()\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\t\tUPDATE_LEADS.run();\n\t\t\t\t\t\tINSERT_LOGS.run()\n\t\t\t\t\t\treturn\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tINSERT_LOGS.run();\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t},\n\tactive:()=>{\n\t\tif(log_date.selectedDate!==helper_js.get_today()){\n\t\t\t return false;\n\t\t\t } else{\n\t\t\treturn true;\n\t\t}\n}",
    "variables": [
      {
        "name": "myVar1",
        "value": "[]"
      },
      {
        "name": "myVar2",
        "value": "{}"
      }
    ]
  },
  "id": "CUSTOMER_CARE_query_js",
  "deleted": false,
  "gitSyncId": "62be7320612750023eb014b3_62c9402f01213a676a3506e5"
}